function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NfCG:function(e,n,t){"use strict";t.r(n),t.d(n,"AuthPageModule",(function(){return ye}));var i=t("mrSG"),r=t("lGQG"),o=t("3Pt+"),s=t("fHJZ"),a=t("TQMi"),c=t("fXoL"),u=t("tyNb"),b=t("TEn/"),p=t("e8h1"),l=t("ofXK");function d(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",14),c.oc(2,"This email address is invalid."),c.Mb(),c.Mb())}function f(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",14),c.oc(2,"Please enter an email address."),c.Mb(),c.Mb())}function m(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,d,3,0,"span",5),c.nc(2,f,3,0,"span",5),c.Mb()),2&e){var t=c.Zb();c.zb(1),c.cc("ngIf",t.f.email.errors.email),c.zb(1),c.cc("ngIf",t.f.email.errors.required)}}function h(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",14),c.oc(2,"Please enter a password."),c.Mb(),c.Mb())}function g(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",14),c.oc(2,"Password must be greater than 7 characters."),c.Mb(),c.Mb())}function v(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,h,3,0,"span",5),c.nc(2,g,3,0,"span",5),c.Mb()),2&e){var t=c.Zb();c.zb(1),c.cc("ngIf",t.f.password.errors.required),c.zb(1),c.cc("ngIf",t.f.password.errors.minlength)}}function w(e,n){1&e&&(c.Nb(0,"ion-item"),c.Lb(1,"ion-checkbox",15),c.Nb(2,"ion-label"),c.oc(3,"Save your password?"),c.Mb(),c.Mb())}function M(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",14),c.oc(2,"Sign in details are incorrect. Please try again."),c.Mb(),c.Mb())}function y(e,n){1&e&&(c.Nb(0,"div",16),c.Lb(1,"ion-spinner",17),c.Mb())}var x,N,k=((N=function(){function e(n,t,i,r,o,s,a,c,u){var b=this;_classCallCheck(this,e),this.formBuilder=n,this.authService=t,this.router=i,this.alertController=r,this.storage=o,this.ga=s,this.platform=a,this.keychainService=c,this.toastController=u,this.passwordType="password",this.invalidDetails=!1,this.loading=!1,this.showAlert=!0,this.keychainNotFound=!1,this.platform.ready().then((function(e){return b.platformSource=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.authService.setState("signIn"),this.signInForm=this.formBuilder.group({email:[null,[o.r.required,o.r.email]],password:[null,[o.r.required,o.r.minLength(8)]],savePassword:[!1]})}},{key:"ionViewDidEnter",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage.get("ion_did_quick_start").then((function(e){n.showAlert=!e}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"togglePasswordType",value:function(){this.passwordType="text"===this.passwordType?"password":"text"}},{key:"signIn",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.signInForm.value.email,t=this.signInForm.value.password,this.loading=!0,!this.signInForm.valid){e.next=40;break}return this.signInForm.disable(),e.next=5,this.authService.signIn(n,t);case 5:if(e.t0=e.sent,"true"!==e.t0){e.next=39;break}if(!(this.keychainNotFound||this.platform.is("ios")&&"dom"!==this.platformSource&&this.f.savePassword.value)){e.next=26;break}e.prev=8,this.keychainService.setKeychainPassword(n,t),e.next=26;break;case 12:if(e.prev=12,e.t1=e.catch(8),console.log("Did/could not add the password to the keychain. Service returned this error: ",e.t1),"errSecDuplicateItem"!==e.t1.code){e.next=25;break}return e.prev=15,e.next=18,this.keychainService.replaceKeychainPassword(n,t);case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(15),console.log("Did/could not replace the password on the keychain. Service returned this error: ",e.t2);case 23:e.next=26;break;case 25:this.presentToast("Did/could not add the password to the keychain.","danger");case 26:if(!this.showAlert){e.next=31;break}return e.next=29,this.presentAlertConfirm();case 29:e.next=33;break;case 31:return e.next=33,this.router.navigateByUrl("/app",{replaceUrl:!0});case 33:this.invalidDetails=!1,this.signInForm.reset(),this.signInForm.enable(),this.loading=!1,e.next=40;break;case 39:this.invalidDetails=!0,this.signInForm.controls.password.reset(),this.signInForm.enable(),this.loading=!1;case 40:case"end":return e.stop()}}),e,this,[[8,12],[15,20]])})))}},{key:"passwordOnBlur",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.f.password.reset(),this.getPassword();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getPassword",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.f.email.valid&&!this.f.password.valid&&this.platform.is("ios")&&"dom"!==this.platformSource,!e.t0){e.next=4;break}return e.next=4,this.getKeychainPassword(this.f.email.value);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getKeychainPassword",value:function(e){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.keychainService.getKeychainPassword(e);case 3:if(t=n.sent,n.t0=t,!n.t0){n.next=9;break}return this.f.password.setValue(t),n.next=9,this.presentToast("Successfully got your password via Keychain","success");case 9:n.next=20;break;case 11:if(n.prev=11,n.t1=n.catch(0),"errSecItemNotFound"!==n.t1.code){n.next=17;break}this.keychainNotFound=!0,n.next=20;break;case 17:return console.log("Could not get your password from the keychain. Service returned this error: ",n.t1),n.next=20,this.presentToast("Could not get your password from the keychain","danger");case 20:case"end":return n.stop()}}),n,this,[[0,11]])})))}},{key:"navToSignUp",value:function(){this.signInForm.reset(),this.router.navigateByUrl("/auth/create-account")}},{key:"navToResetPassword",value:function(){this.signInForm.reset(),this.router.navigateByUrl("/auth/reset-password")}},{key:"presentAlertConfirm",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({message:"Would you like to set some starting filters? If not you, will go straight to the app.",buttons:[{text:"No thanks",role:"cancel",cssClass:"secondary",handler:function(){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storage.set("ion_did_quick_start",!0),e.next=3,this.router.navigateByUrl("/app",{replaceUrl:!0});case 3:case"end":return e.stop()}}),e,this)})))}},{text:"Quick start",handler:function(){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ga.eventEmitter("quick_start","engagement","Quick start"),e.next=3,this.router.navigateByUrl("/app/quick-start",{replaceUrl:!0});case 3:case"end":return e.stop()}}),e,this)})))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentToast",value:function(e,n){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:e,duration:2e3,color:n,cssClass:"ion-text-center",position:"middle"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"f",get:function(){return this.signInForm.controls}}]),e}()).\u0275fac=function(e){return new(e||N)(c.Kb(o.c),c.Kb(r.a),c.Kb(u.h),c.Kb(b.a),c.Kb(p.b),c.Kb(s.a),c.Kb(b.bb),c.Kb(a.a),c.Kb(b.fb))},N.\u0275cmp=c.Eb({type:N,selectors:[["app-sign-in"]],decls:37,vars:8,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-item"],["type","text","placeholder","Email","formControlName","email","oninput","this.value = this.value.toLowerCase().trim()","required","",1,"form-control",3,"ionBlur"],[4,"ngIf"],["placeholder","Password","formControlName","password","required","","oninput","this.value = this.value.trim()",1,"form-control",3,"type"],["name","eye","position","fixed","slot","end","tappable","",3,"click"],[1,"ion-no-padding","ion-no-margin","ion-justify-content-center"],["type","submit",1,"form-control","submit-button",3,"disabled","keydown.enter"],[1,"auth-options"],[1,"ion-justify-content-between","ion-align-items-center"],["size","small",3,"click"],["class","spinner-container",4,"ngIf"],[1,"error"],["slot","start","formControlName","savePassword",1,"form-control"],[1,"spinner-container"],["name","crescent",1,"spinner"]],template:function(e,n){1&e&&(c.Nb(0,"ion-content"),c.Nb(1,"div",0),c.Nb(2,"form",1),c.Vb("ngSubmit",(function(){return n.signIn()})),c.Nb(3,"div",2),c.Nb(4,"p"),c.oc(5,"Please "),c.Nb(6,"b"),c.oc(7,"sign in"),c.Mb(),c.oc(8," to your account."),c.Mb(),c.Nb(9,"div",3),c.Nb(10,"ion-item"),c.Nb(11,"ion-input",4),c.Vb("ionBlur",(function(){return n.passwordOnBlur()})),c.Mb(),c.Mb(),c.nc(12,m,3,2,"span",5),c.Mb(),c.Nb(13,"div",3),c.Nb(14,"ion-item"),c.Lb(15,"ion-input",6),c.Nb(16,"ion-icon",7),c.Vb("click",(function(){return n.togglePasswordType()})),c.Mb(),c.Mb(),c.nc(17,v,3,2,"span",5),c.Mb(),c.Nb(18,"div",3),c.Nb(19,"ion-row",8),c.Nb(20,"button",9),c.Vb("keydown.enter",(function(){return n.signIn()})),c.oc(21,"Sign in"),c.Mb(),c.Mb(),c.nc(22,w,4,0,"ion-item",5),c.nc(23,M,3,0,"span",5),c.Mb(),c.Mb(),c.Mb(),c.Nb(24,"div",10),c.Nb(25,"ion-row",11),c.Nb(26,"ion-label"),c.oc(27,"Don't have an account?"),c.Mb(),c.Nb(28,"ion-button",12),c.Vb("click",(function(){return n.navToSignUp()})),c.oc(29,"Sign Up"),c.Mb(),c.Mb(),c.Mb(),c.Nb(30,"div",10),c.Nb(31,"ion-row",11),c.Nb(32,"ion-label"),c.oc(33,"Forgotten your password?"),c.Mb(),c.Nb(34,"ion-button",12),c.Vb("click",(function(){return n.navToResetPassword()})),c.oc(35,"Reset It"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.nc(36,y,2,0,"div",13),c.Mb()),2&e&&(c.zb(2),c.cc("formGroup",n.signInForm),c.zb(10),c.cc("ngIf",n.f.email.invalid&&n.f.email.touched),c.zb(3),c.cc("type",n.passwordType),c.zb(2),c.cc("ngIf",n.f.password.invalid&&n.f.password.touched),c.zb(3),c.cc("disabled",n.signInForm.invalid||n.loading),c.zb(2),c.cc("ngIf",n.platform.is("ios")),c.zb(1),c.cc("ngIf",n.invalidDetails),c.zb(13),c.cc("ngIf",n.loading))},directives:[b.l,o.t,o.l,o.g,b.v,b.u,b.eb,o.k,o.e,o.p,l.j,b.q,b.G,b.w,b.e,b.i,b.b,b.O],styles:["ion-icon[_ngcontent-%COMP%]:active{color:var(--ion-color-primary)}.container[_ngcontent-%COMP%]{width:33%;min-width:300px;max-width:420px;margin-top:10px;margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:2px;padding-left:5px;padding-right:5px;color:var(--ion-color-danger);font-size:14px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-height:16px;max-height:40px}.container[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{min-height:64px;margin-top:2px;margin-bottom:2px}.auth-options[_ngcontent-%COMP%]{display:inherit;margin-top:10px}.submit-button[_ngcontent-%COMP%]{display:block;background-color:var(--ion-color-primary);margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:.06em;text-transform:uppercase;width:100%;color:#fff;font-family:var(--ion-font-family,inherit);text-align:center;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none;text-decoration:none}.submit-button[disabled][_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.submit-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-left:-40px;margin-top:-40px}.spinner-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:80px!important;height:80px!important;z-index:1}"]}),N),C=((x=function(){function e(n,t){_classCallCheck(this,e),this.router=n,this.menu=t}return _createClass(e,[{key:"ionViewDidEnter",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.menu.swipeGesture(!1,"filterMenu");case 2:return e.next=4,this.menu.swipeGesture(!1,"mainMenu");case 4:case"end":return e.stop()}}),e,this)})))}},{key:"backToHome",value:function(){this.router.navigateByUrl("home")}}]),e}()).\u0275fac=function(e){return new(e||x)(c.Kb(u.h),c.Kb(b.Z))},x.\u0275cmp=c.Eb({type:x,selectors:[["app-auth-page"]],decls:19,vars:0,consts:[["src","../../assets/img/logo/neutrify-logo-v2.png",1,"logo"],["tab","create-account"],["name","person-add"],["tab","sign-in"],["name","log-in"],["tab","reset-password"],["name","help"]],template:function(e,n){1&e&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.Lb(3,"ion-img",0),c.Mb(),c.Mb(),c.Mb(),c.Nb(4,"ion-content"),c.Nb(5,"ion-tabs"),c.Nb(6,"ion-tab-bar"),c.Nb(7,"ion-tab-button",1),c.Lb(8,"ion-icon",2),c.Nb(9,"ion-label"),c.oc(10,"Create new account"),c.Mb(),c.Mb(),c.Nb(11,"ion-tab-button",3),c.Lb(12,"ion-icon",4),c.Nb(13,"ion-label"),c.oc(14,"Sign in"),c.Mb(),c.Mb(),c.Nb(15,"ion-tab-button",5),c.Lb(16,"ion-icon",6),c.Nb(17,"ion-label"),c.oc(18,"Reset password"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb())},directives:[b.p,b.W,b.U,b.r,b.l,b.S,b.Q,b.R,b.q,b.w],styles:["ion-img.logo[_ngcontent-%COMP%]{max-width:150px;max-height:48px;margin:0 auto}ion-content[_ngcontent-%COMP%]{--overflow:hidden;--ion-background-color:var(--ion-color-light)}@media (prefers-color-scheme:dark){ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-medium)}}ion-header[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-light)}ion-tab-bar[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-medium);--color:var(--ion-color-dark);--color-selected:var(--ion-color-primary)}.toolbar-buttons[_ngcontent-%COMP%]{position:absolute;left:0}ion-chip[_ngcontent-%COMP%]{padding:5px}"]}),x);function P(e,n){return function(t){var i=t.controls[n];i.errors&&!i.errors.mustMatch||i.setErrors(t.controls[e].value!==i.value?{mustMatch:!0}:null)}}function _(e){return function(n){var t=n.controls[e],i=/\d/.test(t.value),r=/[A-Z]/.test(t.value),o=/[a-z]/.test(t.value);if(!(i&&r&&o))return t.setErrors({strong:!0});t.setErrors(null)}}function S(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"This email address is invalid."),c.Mb(),c.Mb())}function I(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"You must enter an email address."),c.Mb(),c.Mb())}function O(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,S,3,0,"span",5),c.nc(2,I,3,0,"span",5),c.Mb()),2&e){var t=c.Zb();c.zb(1),c.cc("ngIf",t.f.email.errors.email),c.zb(1),c.cc("ngIf",t.f.email.errors.required)}}function z(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"Could not find this email address. Make sure you have the correct one."),c.Mb(),c.Mb())}function T(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"Please enter the code."),c.Mb(),c.Mb())}function U(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,T,3,0,"span",5),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.f.vefCode.errors.required)}}function F(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"You must enter a password."),c.Mb(),c.Mb())}function R(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"Password must be greater than 7 characters."),c.Mb(),c.Mb())}function j(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"Password must have an uppercase character & a number."),c.Mb(),c.Mb())}function q(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,F,3,0,"span",5),c.nc(2,R,3,0,"span",5),c.nc(3,j,3,0,"span",5),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.f.password.errors.required),c.zb(1),c.cc("ngIf",t.f.password.errors.minlength),c.zb(1),c.cc("ngIf",t.f.password.errors.strong)}}function E(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"You must re-enter your password."),c.Mb(),c.Mb())}function Z(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"The passwords you've entered don't match."),c.Mb(),c.Mb())}function K(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,E,3,0,"span",5),c.nc(2,Z,3,0,"span",5),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.f.confirmPassword.errors.required),c.zb(1),c.cc("ngIf",t.f.confirmPassword.errors.mustMatch)}}function V(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",13),c.oc(2,"Could not reset your password. Make sure you have the correct code."),c.Mb(),c.Mb())}function D(e,n){if(1&e){var t=c.Ob();c.Nb(0,"div",14),c.Nb(1,"p"),c.oc(2),c.Mb(),c.Nb(3,"div",3),c.Nb(4,"ion-item"),c.Lb(5,"ion-input",15),c.Mb(),c.nc(6,U,2,1,"span",5),c.Mb(),c.Nb(7,"div",3),c.Nb(8,"ion-item"),c.Lb(9,"ion-input",16),c.Nb(10,"ion-icon",17),c.Vb("click",(function(){return c.jc(t),c.Zb().togglePasswordType()})),c.Mb(),c.Mb(),c.nc(11,q,4,3,"span",5),c.Mb(),c.Nb(12,"div",3),c.Nb(13,"ion-item"),c.Lb(14,"ion-input",18),c.Nb(15,"ion-icon",17),c.Vb("click",(function(){return c.jc(t),c.Zb().toggleConfirmPasswordType()})),c.Mb(),c.Mb(),c.nc(16,K,3,2,"span",5),c.Mb(),c.Nb(17,"div",3),c.Nb(18,"ion-item",19),c.Nb(19,"button",20),c.Vb("keydown.enter",(function(){return c.jc(t),c.Zb().resetPasswordSubmit()})),c.oc(20,"Reset password"),c.Mb(),c.Mb(),c.nc(21,V,3,0,"span",5),c.Mb(),c.Mb()}if(2&e){var i=c.Zb();c.zb(2),c.qc("A verification email has been sent to ",i.authService.resetPasswordEmail,". Check your junk/spam folder."),c.zb(4),c.cc("ngIf",i.f.vefCode.invalid&&i.f.vefCode.touched),c.zb(3),c.cc("type",i.passwordType),c.zb(2),c.cc("ngIf",i.f.password.invalid&&i.f.password.touched),c.zb(3),c.cc("type",i.confirmPasswordType),c.zb(2),c.cc("ngIf",i.f.confirmPassword.invalid&&i.f.confirmPassword.touched),c.zb(3),c.cc("disabled",i.f.password.invalid||i.f.confirmPassword.invalid||i.f.vefCode.invalid||i.loading),c.zb(2),c.cc("ngIf",i.invalidCode)}}function L(e,n){1&e&&(c.Nb(0,"div",21),c.Lb(1,"ion-spinner",22),c.Mb())}var B,G=((B=function(){function e(n,t,i,r,o,s,a){var c=this;_classCallCheck(this,e),this.formBuilder=n,this.authService=t,this.router=i,this.toastController=r,this.ga=o,this.platform=s,this.keychainService=a,this.passwordType="password",this.confirmPasswordType="password",this.invalidEmailDetails=!1,this.loading=!1,this.invalidCode=!1,this.showSubmit=!1,this.platform.ready().then((function(e){return c.platformSource=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.authService.setState("resetPassword"),this.resetPasswordForm=this.formBuilder.group({email:[null,[o.r.required,o.r.email]],vefCode:[null,[o.r.required]],password:[null,[o.r.required,o.r.minLength(8)]],confirmPassword:[null,[o.r.required]]},{validators:[P("password","confirmPassword"),_("password")]})}},{key:"resetPassword",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.t0=this.f.email.valid,!e.t0){e.next=11;break}return this.f.email.disable(),e.next=6,this.authService.resetPassword(this.f.email.value);case 6:if(!e.sent){e.next=10;break}this.showSubmit=!0,this.f.email.enable(),this.loading=!1,this.ga.eventEmitter("begin_reset_password","engagement","Begin resetting password"),e.next=11;break;case 10:this.invalidEmailDetails=!0,this.f.email.reset(),this.f.email.enable(),this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})))}},{key:"resetPasswordSubmit",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.f.email.value,t=this.f.password.value,this.loading=!0,!(this.showSubmit&&!this.invalidEmailDetails&&this.f.vefCode.valid&&this.f.password.valid&&this.f.confirmPassword.valid)){e.next=36;break}return this.resetPasswordForm.disable(),e.next=5,this.authService.resetPasswordSubmit(this.f.vefCode.value,t);case 5:if(!e.sent){e.next=35;break}if(!this.platform.is("ios")||"dom"===this.platformSource){e.next=25;break}e.prev=7,this.keychainService.setKeychainPassword(n,t),e.next=25;break;case 11:if(e.prev=11,e.t0=e.catch(7),console.log("Did/could not add the password to the keychain. Service returned this error: ",e.t0),"errSecDuplicateItem"!==e.t0.code){e.next=24;break}return e.prev=14,e.next=17,this.keychainService.replaceKeychainPassword(n,t);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log("Did/could not replace the password on the keychain. Service returned this error: ",e.t1);case 22:e.next=25;break;case 24:this.presentToast("Did/could not add the password to the keychain.","danger");case 25:return this.navToSignIn(),this.resetPasswordForm.reset(),this.showSubmit=!1,this.resetPasswordForm.enable(),this.loading=!1,e.next=32,this.presentToast("Successfully reset your password. Please sign in.","primary");case 32:this.ga.eventEmitter("reset_password","engagement","Reset password"),e.next=36;break;case 35:this.invalidCode=!0,this.f.vefCode.reset(),this.f.password.reset(),this.f.confirmPassword.reset(),this.resetPasswordForm.enable(),this.loading=!1;case 36:case"end":return e.stop()}}),e,this,[[7,11],[14,19]])})))}},{key:"togglePasswordType",value:function(){this.passwordType="text"===this.passwordType?"password":"text"}},{key:"toggleConfirmPasswordType",value:function(){this.confirmPasswordType="text"===this.confirmPasswordType?"password":"text"}},{key:"presentToast",value:function(e,n){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:e,duration:2e3,color:n,cssClass:"ion-text-center",position:"middle"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"navToSignIn",value:function(){this.resetPasswordForm.reset(),this.router.navigateByUrl("/auth/sign-in")}},{key:"f",get:function(){return this.resetPasswordForm.controls}}]),e}()).\u0275fac=function(e){return new(e||B)(c.Kb(o.c),c.Kb(r.a),c.Kb(u.h),c.Kb(b.fb),c.Kb(s.a),c.Kb(b.bb),c.Kb(a.a))},B.\u0275cmp=c.Eb({type:B,selectors:[["app-reset-password"]],decls:26,vars:7,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group",3,"hidden"],[1,"form-item"],["type","text","placeholder","Email","formControlName","email","required","","oninput","this.value = this.value.toLowerCase().trim()",1,"form-control"],[4,"ngIf"],[1,"ion-no-padding","ion-no-margin","ion-justify-content-center"],[1,"form-control","submit-button",3,"disabled","click","keydown.enter"],["class","form-group",4,"ngIf"],[1,"auth-options"],[1,"ion-justify-content-between","ion-align-items-center"],["size","small",3,"click"],["class","spinner-container",4,"ngIf"],[1,"error"],[1,"form-group"],["type","text","placeholder","Verification code","formControlName","vefCode","required","","oninput","this.value = this.value.trim()",1,"form-control"],["placeholder","New password","formControlName","password","required","","oninput","this.value = this.value.trim()",1,"form-control",3,"type"],["name","eye","position","fixed","slot","end","tappable","",3,"click"],["placeholder","Re-enter password","formControlName","confirmPassword","required","","oninput","this.value = this.value.trim()",1,"form-control",3,"type"],["lines","none"],["type","submit",1,"form-control","submit-button",3,"disabled","keydown.enter"],[1,"spinner-container"],["name","crescent",1,"spinner"]],template:function(e,n){1&e&&(c.Nb(0,"ion-content"),c.Nb(1,"div",0),c.Nb(2,"form",1),c.Vb("ngSubmit",(function(){return n.resetPasswordSubmit()})),c.Nb(3,"div",2),c.Nb(4,"p"),c.oc(5,"To "),c.Nb(6,"b"),c.oc(7,"reset your password"),c.Mb(),c.oc(8,", please enter the email address associated with your account."),c.Mb(),c.Nb(9,"div",3),c.Nb(10,"ion-item"),c.Lb(11,"ion-input",4),c.Mb(),c.nc(12,O,3,2,"span",5),c.Mb(),c.Nb(13,"div",3),c.Nb(14,"ion-row",6),c.Nb(15,"button",7),c.Vb("click",(function(){return n.resetPassword()}))("keydown.enter",(function(){return n.resetPassword()})),c.oc(16,"Reset"),c.Mb(),c.Mb(),c.nc(17,z,3,0,"span",5),c.Mb(),c.Mb(),c.nc(18,D,22,8,"div",8),c.Mb(),c.Nb(19,"div",9),c.Nb(20,"ion-row",10),c.Nb(21,"ion-label"),c.oc(22,"Remembered your password?"),c.Mb(),c.Nb(23,"ion-button",11),c.Vb("click",(function(){return n.navToSignIn()})),c.oc(24,"Sign In"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.nc(25,L,2,0,"div",12),c.Mb()),2&e&&(c.zb(2),c.cc("formGroup",n.resetPasswordForm),c.zb(1),c.cc("hidden",n.showSubmit),c.zb(9),c.cc("ngIf",n.f.email.invalid&&n.f.email.touched),c.zb(3),c.cc("disabled",n.f.email.invalid||n.showSubmit||n.loading),c.zb(2),c.cc("ngIf",n.invalidEmailDetails),c.zb(1),c.cc("ngIf",n.showSubmit),c.zb(7),c.cc("ngIf",n.loading))},directives:[b.l,o.t,o.l,o.g,b.v,b.u,b.eb,o.k,o.e,o.p,l.j,b.G,b.w,b.e,b.q,b.O],styles:["ion-icon[_ngcontent-%COMP%]:active{color:var(--ion-color-primary)}.container[_ngcontent-%COMP%]{width:33%;min-width:300px;max-width:420px;margin-top:10px;margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:2px;padding-left:5px;padding-right:5px;color:var(--ion-color-danger);font-size:14px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-height:16px;max-height:40px}.container[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{min-height:64px;margin-top:2px;margin-bottom:2px}.auth-options[_ngcontent-%COMP%]{display:inherit;margin-top:10px}.submit-button[_ngcontent-%COMP%]{display:block;background-color:var(--ion-color-primary);margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:.06em;text-transform:uppercase;width:100%;color:#fff;font-family:var(--ion-font-family,inherit);text-align:center;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none;text-decoration:none}.submit-button[disabled][_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.submit-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-left:-40px;margin-top:-40px}.spinner-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:80px!important;height:80px!important;z-index:1}"]}),B),A=t("m/P+");function Y(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"This email address is invalid."),c.Mb(),c.Mb())}function Q(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"You must enter an email address."),c.Mb(),c.Mb())}function H(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,Y,3,0,"span",7),c.nc(2,Q,3,0,"span",7),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.sf.email.errors.email),c.zb(1),c.cc("ngIf",t.sf.email.errors.required)}}function J(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"You must enter a password."),c.Mb(),c.Mb())}function X(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Your password must include at least 8 characters."),c.Mb(),c.Mb())}function W(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Your password must contain an uppercase character and a number."),c.Mb(),c.Mb())}function $(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,J,3,0,"span",7),c.nc(2,X,3,0,"span",7),c.nc(3,W,3,0,"span",7),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.sf.password.errors.required),c.zb(1),c.cc("ngIf",t.sf.password.errors.minlength),c.zb(1),c.cc("ngIf",t.sf.password.errors.strong)}}function ee(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"You must re-enter your password."),c.Mb(),c.Mb())}function ne(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"The passwords you've entered don't match."),c.Mb(),c.Mb())}function te(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,ee,3,0,"span",7),c.nc(2,ne,3,0,"span",7),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.sf.confirmPassword.errors.required),c.zb(1),c.cc("ngIf",t.sf.confirmPassword.errors.mustMatch)}}function ie(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Please accept the terms & conditons."),c.Mb(),c.Mb())}function re(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,ie,3,0,"span",7),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.sf.privacyConsent.errors.required)}}function oe(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Could not sign you up. Try a different email."),c.Mb(),c.Mb())}function se(e,n){if(1&e){var t=c.Ob();c.Nb(0,"ion-button",20),c.Vb("click",(function(){return c.jc(t),c.Zb(2).signUpInterrupted=!0})),c.oc(1,"Resume"),c.Mb()}}function ae(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"This email address is invalid."),c.Mb(),c.Mb())}function ce(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"You must enter an email address."),c.Mb(),c.Mb())}function ue(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,ae,3,0,"span",7),c.nc(2,ce,3,0,"span",7),c.Mb()),2&e){c.Zb();var t=c.ic(5);c.zb(1),c.cc("ngIf",t.errors.email),c.zb(1),c.cc("ngIf",t.errors.required)}}function be(e,n){if(1&e){var t=c.Ob();c.Nb(0,"div",8),c.Nb(1,"p"),c.oc(2,"Enter the email you signed up with below."),c.Mb(),c.Nb(3,"ion-item"),c.Nb(4,"ion-input",24,25),c.Vb("ngModelChange",(function(e){return c.jc(t),c.Zb(2).resetEmail=e})),c.Mb(),c.Nb(6,"ion-button",26),c.Vb("click",(function(){c.jc(t);var e=c.Zb(2);return e.resendEmail(e.resetEmail)})),c.oc(7,"Resend"),c.Mb(),c.Mb(),c.nc(8,ue,3,2,"span",7),c.Mb()}if(2&e){var i=c.ic(5),r=c.Zb(2);c.zb(4),c.cc("ngModel",r.resetEmail),c.zb(2),c.cc("disabled",i.invalid),c.zb(2),c.cc("ngIf",i.invalid&&i.touched)}}function pe(e,n){if(1&e){var t=c.Ob();c.Nb(0,"div",2),c.Nb(1,"form",3),c.Vb("ngSubmit",(function(){return c.jc(t),c.Zb().signUp()})),c.Nb(2,"div",4),c.Nb(3,"p"),c.oc(4,"To begin using Neutrify, you must first "),c.Nb(5,"b"),c.oc(6,"create an account"),c.Mb(),c.oc(7,". New passwords must include an uppercase character, a number and be at least 8 characters in length."),c.Mb(),c.Nb(8,"div",5),c.Nb(9,"ion-item"),c.Lb(10,"ion-input",6),c.Mb(),c.nc(11,H,3,2,"span",7),c.Mb(),c.Nb(12,"div",8),c.Nb(13,"ion-item"),c.Lb(14,"ion-input",9),c.Nb(15,"ion-icon",10),c.Vb("click",(function(){return c.jc(t),c.Zb().togglePasswordType()})),c.Mb(),c.Mb(),c.nc(16,$,4,3,"span",7),c.Mb(),c.Nb(17,"div",8),c.Nb(18,"ion-item"),c.Lb(19,"ion-input",11),c.Nb(20,"ion-icon",10),c.Vb("click",(function(){return c.jc(t),c.Zb().toggleConfirmPasswordType()})),c.Mb(),c.Mb(),c.nc(21,te,3,2,"span",7),c.Mb(),c.Nb(22,"div",12),c.Nb(23,"ion-item"),c.Lb(24,"ion-checkbox",13),c.Nb(25,"ion-label",14),c.Nb(26,"p"),c.oc(27," By ticking this box you accept the "),c.Nb(28,"a",15),c.Vb("click",(function(){return c.jc(t),c.Zb().openPage("https://neutrify.news/home/terms-conditions/")})),c.oc(29,"terms & conditions"),c.Mb(),c.oc(30,", our "),c.Nb(31,"a",15),c.Vb("click",(function(){return c.jc(t),c.Zb().openPage("https://neutrify.news/home/privacy-policy")})),c.oc(32,"privacy policy"),c.Mb(),c.oc(33,", and allow us to use your email address for account management purposes. "),c.Mb(),c.Mb(),c.Mb(),c.nc(34,re,2,1,"span",7),c.Mb(),c.Nb(35,"div",8),c.Nb(36,"ion-row",16),c.Nb(37,"button",17),c.Vb("keydown.enter",(function(){return c.jc(t),c.Zb().signUp()})),c.oc(38,"Create account"),c.Mb(),c.Mb(),c.nc(39,oe,3,0,"span",7),c.Mb(),c.Mb(),c.Mb(),c.Nb(40,"div",18),c.Nb(41,"ion-row",19),c.Nb(42,"ion-label"),c.oc(43,"Already have an account?"),c.Mb(),c.Nb(44,"ion-button",20),c.Vb("click",(function(){return c.jc(t),c.Zb().navToSignIn()})),c.oc(45,"Sign In"),c.Mb(),c.Mb(),c.Mb(),c.Nb(46,"div",18),c.Nb(47,"ion-row",19),c.Nb(48,"ion-label"),c.oc(49,"Get interrupted earlier?"),c.Mb(),c.nc(50,se,2,0,"ion-button",21),c.Mb(),c.Mb(),c.nc(51,be,9,3,"div",22),c.Mb()}if(2&e){var i=c.Zb();c.zb(1),c.cc("formGroup",i.signUpForm),c.zb(10),c.cc("ngIf",i.sf.email.invalid&&i.sf.email.touched),c.zb(3),c.cc("type",i.passwordType),c.zb(2),c.cc("ngIf",i.sf.password.invalid&&i.sf.password.touched),c.zb(3),c.cc("type",i.confirmPasswordType),c.zb(2),c.cc("ngIf",i.sf.confirmPassword.invalid&&i.sf.confirmPassword.touched),c.zb(13),c.cc("ngIf",i.sf.privacyConsent.invalid&&i.sf.privacyConsent.touched),c.zb(3),c.cc("disabled",i.signUpForm.invalid||i.loading),c.zb(2),c.cc("ngIf",i.invalidDetails),c.zb(11),c.cc("ngIf",!i.signUpInterrupted),c.zb(1),c.cc("ngIf",i.signUpInterrupted)}}function le(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Please enter the code."),c.Mb(),c.Mb())}function de(e,n){if(1&e&&(c.Nb(0,"span"),c.nc(1,le,3,0,"span",7),c.Mb()),2&e){var t=c.Zb(2);c.zb(1),c.cc("ngIf",t.cSF.vefCode.errors.required)}}function fe(e,n){1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2,"Could not verify your email. Make sure you copied the correct code."),c.Mb(),c.Mb())}function me(e,n){if(1&e&&(c.Nb(0,"span"),c.Nb(1,"p",23),c.oc(2),c.Mb(),c.Mb()),2&e){var t=c.Zb(2);c.zb(2),c.qc("The verification email has been resent to ",t.authService.signUpEmail,".")}}function he(e,n){if(1&e){var t=c.Ob();c.Nb(0,"div",2),c.Nb(1,"form",3),c.Vb("ngSubmit",(function(){return c.jc(t),c.Zb().confirmSignUp()})),c.Nb(2,"div",4),c.Nb(3,"p"),c.oc(4),c.Mb(),c.Nb(5,"div",8),c.Nb(6,"ion-item"),c.Lb(7,"ion-input",27),c.Mb(),c.nc(8,de,2,1,"span",7),c.Mb(),c.Nb(9,"div",8),c.Nb(10,"ion-row",16),c.Nb(11,"button",17),c.Vb("keydown.enter",(function(){return c.jc(t),c.Zb().confirmSignUp()})),c.oc(12,"Verify email"),c.Mb(),c.Mb(),c.nc(13,fe,3,0,"span",7),c.Mb(),c.Mb(),c.Mb(),c.Nb(14,"div",18),c.Nb(15,"ion-row",19),c.Nb(16,"ion-label"),c.oc(17,"Sign up code still not arrived?"),c.Mb(),c.Nb(18,"ion-button",20),c.Vb("click",(function(){return c.jc(t),c.Zb().resendEmail()})),c.oc(19,"Resend"),c.Mb(),c.Mb(),c.nc(20,me,3,1,"span",7),c.Mb(),c.Mb()}if(2&e){var i=c.Zb();c.zb(1),c.cc("formGroup",i.confirmSignUpForm),c.zb(3),c.qc("A verification code has been sent to ",i.authService.signUpEmail,". Check your junk/spam folder."),c.zb(4),c.cc("ngIf",i.cSF.vefCode.invalid&&i.cSF.vefCode.touched),c.zb(3),c.cc("disabled",i.confirmSignUpForm.invalid||i.loading),c.zb(2),c.cc("ngIf",i.invalidDetails),c.zb(7),c.cc("ngIf",i.resentEmail)}}function ge(e,n){1&e&&(c.Nb(0,"div",28),c.Lb(1,"ion-spinner",29),c.Mb())}var ve,we,Me=[{path:"",component:C,children:[{path:"",redirectTo:"/auth/create-account",pathMatch:"full"},{path:"create-account",component:(ve=function(){function e(n,t,i,r,o,s){_classCallCheck(this,e),this.formBuilder=n,this.authService=t,this.toastController=i,this.router=r,this.ga=o,this.inAppBrowser=s,this.passwordType="password",this.confirmPasswordType="password",this.invalidDetails=!1,this.loading=!1,this.signUpInterrupted=!1,this.showConfirmSignUp=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.authService.setState("signUp"),this.signUpForm=this.formBuilder.group({email:[null,[o.r.required,o.r.email]],password:[null,[o.r.required,o.r.minLength(8)]],confirmPassword:[null,o.r.required],privacyConsent:[null,o.r.requiredTrue]},{validators:[P("password","confirmPassword"),_("password")]})}},{key:"togglePasswordType",value:function(){this.passwordType="text"===this.passwordType?"password":"text"}},{key:"toggleConfirmPasswordType",value:function(){this.confirmPasswordType="text"===this.confirmPasswordType?"password":"text"}},{key:"signUp",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.t0=this.signUpForm.valid,!e.t0){e.next=22;break}return this.signUpForm.disable(),e.next=6,this.authService.signUp(this.signUpForm.value.email,this.signUpForm.value.password);case 6:if(!e.sent){e.next=16;break}return this.invalidDetails=!1,this.initConfirmSignUp(),this.loading=!1,e.next=12,this.presentToast("Please verify your email account.","secondary");case 12:this.signUpForm.enable(),this.ga.eventEmitter("begin_sign_up","engagement","Begin signing up"),e.next=22;break;case 16:return this.signUpForm.reset(),this.invalidDetails=!0,this.signUpForm.enable(),this.loading=!1,e.next=22,this.presentToast("Unable to create a new account. Are you sure you don't already have an account?","danger");case 22:case"end":return e.stop()}}),e,this)})))}},{key:"initConfirmSignUp",value:function(){this.authService.setState("confirmSignUp"),this.confirmSignUpForm=this.formBuilder.group({vefCode:[null,[o.r.required]]}),this.showConfirmSignUp=!0}},{key:"confirmSignUp",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.t0=this.confirmSignUpForm.valid,!e.t0){e.next=20;break}return this.confirmSignUpForm.disable(),e.next=6,this.authService.confirmSignUp(this.confirmSignUpForm.value.vefCode);case 6:if(!e.sent){e.next=19;break}return e.next=9,this.presentToast("Successfully created your account. Please sign in.","primary");case 9:this.navToSignIn(),this.invalidDetails=!1,this.showConfirmSignUp=!1,this.signUpForm.reset(),this.confirmSignUpForm.reset(),this.confirmSignUpForm.enable(),this.loading=!1,this.ga.eventEmitter("sign_up","engagement","Sign up"),e.next=20;break;case 19:this.invalidDetails=!0,this.confirmSignUpForm.reset(),this.confirmSignUpForm.enable(),this.loading=!1;case 20:case"end":return e.stop()}}),e,this)})))}},{key:"resendEmail",value:function(e){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,e&&(this.signUpInterrupted=!1),n.next=4,this.authService.resendSignUp(e);case 4:if(!n.sent){n.next=8;break}this.resentEmail=!0,e&&(this.signUpForm.reset(),this.initConfirmSignUp()),this.loading=!1,n.next=11;break;case 8:return n.next=10,this.presentToast("Email could not be resent. Please check you have entered the correct email address.","danger");case 10:this.loading=!1;case 11:case"end":return n.stop()}}),n,this)})))}},{key:"presentToast",value:function(e,n){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:e,duration:2e3,color:n,cssClass:"ion-text-center",position:"middle"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"navToSignIn",value:function(){this.signUpForm.reset(),this.router.navigateByUrl("/auth/sign-in")}},{key:"openPage",value:function(e){this.inAppBrowser.create(encodeURI(e),"_system")}},{key:"sf",get:function(){return this.signUpForm.controls}},{key:"cSF",get:function(){return this.confirmSignUpForm.controls}}]),e}(),ve.\u0275fac=function(e){return new(e||ve)(c.Kb(o.c),c.Kb(r.a),c.Kb(b.fb),c.Kb(u.h),c.Kb(s.a),c.Kb(A.a))},ve.\u0275cmp=c.Eb({type:ve,selectors:[["app-create-account"]],decls:4,vars:3,consts:[["class","container",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-item","ion-tappable"],["type","text","placeholder","Email","formControlName","email","required","","oninput","this.value = this.value.toLowerCase().trim()",1,"form-control"],[4,"ngIf"],[1,"form-item"],["placeholder","Password","formControlName","password","required","","oninput","this.value = this.value.trim()",1,"form-control","ion-tappable",3,"type"],["name","eye","position","fixed","slot","end",3,"click"],["placeholder","Re-enter password","formControlName","confirmPassword","required","","oninput","this.value = this.value.trim()",1,"form-control","ion-tappable",3,"type"],[1,"consent-item"],["slot","start","formControlName","privacyConsent","required","",1,"form-control","ion-tappable"],[1,"ion-text-wrap"],[2,"text-decoration","none","cursor","pointer",3,"click"],[1,"ion-no-padding","ion-no-margin","ion-justify-content-center"],["type","submit",1,"form-control","submit-button",3,"disabled","keydown.enter"],[1,"auth-options"],[1,"ion-justify-content-between","ion-align-items-center"],["size","small",3,"click"],["size","small",3,"click",4,"ngIf"],["class","form-item",4,"ngIf"],[1,"error"],["name","resetSubmit","type","text","placeholder","Email","email","","required","","oninput","this.value = this.value.toLowerCase().trim()",1,"form-control",3,"ngModel","ngModelChange"],["resetEmailCtrl","ngModel"],["size","small",3,"disabled","click"],["type","text","placeholder","Verification code","formControlName","vefCode","required","","oninput","this.value = this.value.trim()",1,"form-control"],[1,"spinner-container"],["name","crescent",1,"spinner"]],template:function(e,n){1&e&&(c.Nb(0,"ion-content"),c.nc(1,pe,52,11,"div",0),c.nc(2,he,21,6,"div",0),c.nc(3,ge,2,0,"div",1),c.Mb()),2&e&&(c.zb(1),c.cc("ngIf",!n.showConfirmSignUp),c.zb(1),c.cc("ngIf",n.showConfirmSignUp),c.zb(1),c.cc("ngIf",n.loading))},directives:[b.l,l.j,o.t,o.l,o.g,b.v,b.u,b.eb,o.k,o.e,o.p,b.q,b.i,b.b,b.w,b.G,b.e,o.b,o.m,b.O],styles:["ion-icon[_ngcontent-%COMP%]:active{color:var(--ion-color-primary)}.container[_ngcontent-%COMP%]{width:33%;min-width:300px;max-width:420px;margin-top:10px;margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:2px;padding-left:5px;padding-right:5px;color:var(--ion-color-danger);font-size:14px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-height:16px;max-height:40px}.container[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{min-height:64px;margin-top:2px;margin-bottom:2px}.container[_ngcontent-%COMP%]   .consent-item[_ngcontent-%COMP%]{min-height:120px;margin-top:2px;margin-bottom:2px}.auth-options[_ngcontent-%COMP%]{display:inherit;margin-top:10px}.submit-button[_ngcontent-%COMP%]{display:block;background-color:var(--ion-color-primary);margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:.06em;text-transform:uppercase;width:100%;color:#fff;font-family:var(--ion-font-family,inherit);text-align:center;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none;text-decoration:none}.submit-button[disabled][_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.submit-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-left:-40px;margin-top:-40px}.spinner-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:80px!important;height:80px!important;z-index:1}"]}),ve)},{path:"sign-in",component:k},{path:"reset-password",component:G}]}],ye=((we=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ib({type:we}),we.\u0275inj=c.Hb({factory:function(e){return new(e||we)},imports:[[l.b,o.h,o.o,b.X,u.j.forChild(Me)]]}),we)}}]);