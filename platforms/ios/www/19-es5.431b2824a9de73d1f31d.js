function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{tkyS:function(e,t,n){"use strict";n.r(t),n.d(t,"NewsFeedPageModule",(function(){return Qe}));var i=n("ofXK"),r=n("3Pt+"),a=n("tyNb"),o=n("TEn/"),s=n("mrSG"),c=n("lGQG"),l=n("Gi7S"),u=n("fHJZ"),d=n("Dn3B"),h=n("xaWA"),b=n("R0Ic"),f=n("AytR"),g=n("/Tr7"),m=n("jIYg");function p(e,t){Object(m.a)(2,arguments);var n=Object(g.a)(e),i=Object(g.a)(t);return n.getTime()-i.getTime()}function v(e,t){Object(m.a)(2,arguments);var n=Object(g.a)(e),i=Object(g.a)(t),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function w(e,t){Object(m.a)(2,arguments);var n=Object(g.a)(e),i=Object(g.a)(t),r=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return 12*r+a}function y(e,t){Object(m.a)(2,arguments);var n=Object(g.a)(e),i=Object(g.a)(t),r=v(n,i),a=Math.abs(w(n,i));n.setMonth(n.getMonth()-r*a);var o=v(n,i)===-r,s=r*(a-o);return 0===s?0:s}function M(e,t){Object(m.a)(2,arguments);var n=p(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}var x={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function O(e,t,n){var i;return n=n||{},i="string"==typeof x[e]?x[e]:1===t?x[e].one:x[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+i:i+" ago":i}function C(e){return function(t){var n=t||{},i=n.width?String(n.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}var k={date:C({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:C({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:C({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},P={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function _(e,t,n,i){return P[e]}function T(e){return function(t,n){var i,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth;i=e.values[c]||e.values[s]}return i[e.argumentCallback?e.argumentCallback(t):t]}}var A={ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:T({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:T({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:T({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:T({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:T({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function N(e){return function(t,n){var i=String(t),r=n||{},a=r.width,o=i.match(a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth]);if(!o)return null;var s,c=o[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].test(c))return n}(l):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(c))return n}(l),s=e.valueCallback?e.valueCallback(s):s,{value:s=r.valueCallback?r.valueCallback(s):s,rest:i.slice(c.length)}}}var j,S={ordinalNumber:(j={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),i=t||{},r=n.match(j.matchPattern);if(!r)return null;var a=r[0],o=n.match(j.parsePattern);if(!o)return null;var s=j.valueCallback?j.valueCallback(o[0]):o[0];return{value:s=i.valueCallback?i.valueCallback(s):s,rest:n.slice(a.length)}}),era:N({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:N({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:N({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:N({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:N({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},D={code:"en-US",formatDistance:O,formatLong:k,formatRelative:_,localize:A,match:S,options:{weekStartsOn:0,firstWeekContainsDate:1}};function z(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},e)}function L(e){return e.getTime()%6e4}function R(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*n+(n>0?(6e4+L(t))%6e4:L(t))}function I(e,t,n){Object(m.a)(2,arguments);var i=n||{},r=i.locale||D;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=v(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var o,s,c=z(i);c.addSuffix=Boolean(i.addSuffix),c.comparison=a,a>0?(o=Object(g.a)(t),s=Object(g.a)(e)):(o=Object(g.a)(e),s=Object(g.a)(t));var l,u=M(s,o),d=(R(s)-R(o))/1e3,h=Math.round((u-d)/60);if(h<2)return i.includeSeconds?u<5?r.formatDistance("lessThanXSeconds",5,c):u<10?r.formatDistance("lessThanXSeconds",10,c):u<20?r.formatDistance("lessThanXSeconds",20,c):u<40?r.formatDistance("halfAMinute",null,c):r.formatDistance(u<60?"lessThanXMinutes":"xMinutes",1,c):0===h?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",h,c);if(h<45)return r.formatDistance("xMinutes",h,c);if(h<90)return r.formatDistance("aboutXHours",1,c);if(h<1440){var b=Math.round(h/60);return r.formatDistance("aboutXHours",b,c)}if(h<2520)return r.formatDistance("xDays",1,c);if(h<43200){var f=Math.round(h/1440);return r.formatDistance("xDays",f,c)}if(h<86400)return l=Math.round(h/43200),r.formatDistance("aboutXMonths",l,c);if((l=y(s,o))<12){var p=Math.round(h/43200);return r.formatDistance("xMonths",p,c)}var w=l%12,x=Math.floor(l/12);return w<3?r.formatDistance("aboutXYears",x,c):w<9?r.formatDistance("overXYears",x,c):r.formatDistance("almostXYears",x+1,c)}var W=n("/h9T"),E=n("9/EM");function F(e,t){Object(m.a)(2,arguments);var n=Object(W.a)(t);return Object(E.a)(e,-n)}var U=n("dLU1");function Y(e,t){Object(m.a)(2,arguments);var n=Object(W.a)(t);return Object(U.a)(e,-n)}var H=n("IjAw"),X=n("DTy+"),q=n("0QAI"),B=n("fXoL");function G(e,t){if(1&e&&(B.Nb(0,"ion-card",2),B.Nb(1,"div",3),B.Nb(2,"ion-row",4),B.Lb(3,"ion-skeleton-text",5),B.Lb(4,"ion-skeleton-text",6),B.Mb(),B.Lb(5,"ion-skeleton-text",7),B.Mb(),B.Nb(6,"ion-row",8),B.Lb(7,"ion-skeleton-text",5),B.Lb(8,"ion-skeleton-text",9),B.Mb(),B.Mb()),2&e){var n=B.Zb();B.zb(5),B.cc("hidden",n.platformWidth>=720)}}var V,K,Q,Z=((Q=function(){function e(){_classCallCheck(this,e),this.numberOfCards=new Array(5)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Q)},Q.\u0275cmp=B.Eb({type:Q,selectors:[["app-skeleton-feed"]],decls:2,vars:1,consts:[["id","skeleton-feed"],["class","ion-padding skeleton-card",4,"ngFor","ngForOf"],[1,"ion-padding","skeleton-card"],[1,"skeleton-title"],[1,"ion-justify-content-between"],["animated",""],["animated","",2,"width","5%"],["animated","",3,"hidden"],[1,"ion-justify-content-between","skeleton-footer"],["animated","",2,"text-align","end"]],template:function(e,t){1&e&&(B.Nb(0,"div",0),B.nc(1,G,9,1,"ion-card",1),B.Mb()),2&e&&(B.zb(1),B.cc("ngForOf",t.numberOfCards))},directives:[i.i,o.g,o.G,o.L],styles:["#skeleton-feed[_ngcontent-%COMP%]{padding-top:0;margin:0 auto;max-width:1080px}.skeleton-card[_ngcontent-%COMP%]{padding:5px 5px 0;margin:5px 2px;min-width:270px;max-width:1080px;background-color:var(--ion-color-light)}.skeleton-card[_ngcontent-%COMP%]   .skeleton-title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:18px;width:80%;text-align:start}.skeleton-card[_ngcontent-%COMP%]   .skeleton-footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:14px;width:30%}"]}),Q),$=((K=function(){function e(t,n,i){_classCallCheck(this,e),this.filterService=t,this.popoverController=n,this.ga=i,this.clicked=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"addFilter",value:function(e){this.clicked=!0,this.filterService.addSingleFilter(this.optionType,e,this.value.toLowerCase()),this.dismiss(),this.ga.eventEmitter("use_filter","engagement","Popover filter used")}},{key:"dismiss",value:function(){this.popoverController.dismiss({dismissed:!0})}}]),e}()).\u0275fac=function(e){return new(e||K)(B.Kb(d.a),B.Kb(o.cb),B.Kb(u.a))},K.\u0275cmp=B.Eb({type:K,selectors:[["app-add-filter-popover"]],inputs:{optionType:"optionType",value:"value"},decls:11,vars:1,consts:[[1,"ion-no-margin","ion-no-padding","ion-justify-content-center"],[1,"title"],["color","primary",3,"click"],["color","danger",3,"click"]],template:function(e,t){1&e&&(B.Nb(0,"ion-toolbar"),B.Nb(1,"ion-row",0),B.Nb(2,"ion-label",1),B.oc(3),B.Mb(),B.Mb(),B.Nb(4,"ion-row",0),B.Nb(5,"ion-chip",2),B.Vb("click",(function(){return t.addFilter("include")})),B.Nb(6,"ion-label"),B.oc(7,"Include"),B.Mb(),B.Mb(),B.Nb(8,"ion-chip",3),B.Vb("click",(function(){return t.addFilter("exclude")})),B.Nb(9,"ion-label"),B.oc(10,"Exclude"),B.Mb(),B.Mb(),B.Mb(),B.Mb()),2&e&&(B.zb(3),B.pc(t.value))},directives:[o.W,o.G,o.w,o.j],styles:["ion-toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#666;font-size:18px}ion-toolbar[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:18px}"]}),K),J=((V=function(){function e(t){_classCallCheck(this,e),this.modalController=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){this.modalController.dismiss({dismissed:!0})}}]),e}()).\u0275fac=function(e){return new(e||V)(B.Kb(o.ab))},V.\u0275cmp=B.Eb({type:V,selectors:[["app-image-modal"]],inputs:{image:"image"},decls:4,vars:1,consts:[[1,"inner-content"],[1,"image-modal",3,"src"],["name","close-circle","color","primary",1,"dismiss-icon",3,"click"]],template:function(e,t){1&e&&(B.Nb(0,"div",0),B.Nb(1,"ion-grid"),B.Lb(2,"ion-img",1),B.Nb(3,"ion-icon",2),B.Vb("click",(function(){return t.dismiss()})),B.Mb(),B.Mb(),B.Mb()),2&e&&(B.zb(2),B.cc("src",t.image))},directives:[o.o,o.r,o.q],styles:[".image-modal[_ngcontent-%COMP%]{max-width:1066px;margin:0 auto;top:0;right:0;left:0;bottom:0}.dismiss-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;font-size:32px}.dismiss-icon[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),V);function ee(e){Object(m.a)(1,arguments);var t=Object(g.a)(e);return!isNaN(t)}function te(e,t){Object(m.a)(2,arguments);var n=Object(g.a)(e).getTime(),i=Object(W.a)(t);return new Date(n+i)}function ne(e,t){Object(m.a)(2,arguments);var n=Object(W.a)(t);return te(e,-n)}function ie(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}function re(e){Object(m.a)(1,arguments);var t=1,n=Object(g.a)(e),i=n.getUTCDay(),r=(i<t?7:0)+i-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function ae(e){Object(m.a)(1,arguments);var t=Object(g.a)(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=re(i),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=re(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function oe(e){Object(m.a)(1,arguments);var t=ae(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var i=re(n);return i}function se(e,t){Object(m.a)(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,a=null==r?0:Object(W.a)(r),o=null==n.weekStartsOn?a:Object(W.a)(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Object(g.a)(e),c=s.getUTCDay(),l=(c<o?7:0)+c-o;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function ce(e,t){Object(m.a)(1,arguments);var n=Object(g.a)(e,t),i=n.getUTCFullYear(),r=t||{},a=r.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=null==o?1:Object(W.a)(o),c=null==r.firstWeekContainsDate?s:Object(W.a)(r.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(i+1,0,c),l.setUTCHours(0,0,0,0);var u=se(l,t),d=new Date(0);d.setUTCFullYear(i,0,c),d.setUTCHours(0,0,0,0);var h=se(d,t);return n.getTime()>=u.getTime()?i+1:n.getTime()>=h.getTime()?i:i-1}function le(e,t){Object(m.a)(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.firstWeekContainsDate,a=null==r?1:Object(W.a)(r),o=null==n.firstWeekContainsDate?a:Object(W.a)(n.firstWeekContainsDate),s=ce(e,t),c=new Date(0);c.setUTCFullYear(s,0,o),c.setUTCHours(0,0,0,0);var l=se(c,t);return l}function ue(e,t){var n=e>0?"-":"+",i=Math.abs(e),r=Math.floor(i/60),a=i%60;if(0===a)return n+String(r);var o=t||"";return n+String(r)+o+ie(a,2)}function de(e,t){return e%60==0?(e>0?"-":"+")+ie(Math.abs(e)/60,2):he(e,t)}function he(e,t){var n=t||"",i=e>0?"-":"+",r=Math.abs(e);return i+ie(Math.floor(r/60),2)+n+ie(r%60,2)}var be={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear();return n.ordinalNumber(i>0?i:1-i,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return ie("yy"===t?i%100:i,t.length)}(e,t)},Y:function(e,t,n,i){var r=ce(e,i),a=r>0?r:1-r;return"YY"===t?ie(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):ie(a,t.length)},R:function(e,t){return ie(ae(e),t.length)},u:function(e,t){return ie(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return ie(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return ie(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):ie(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return ie(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var r=function(e,t){Object(m.a)(1,arguments);var n=Object(g.a)(e),i=se(n,t).getTime()-le(n,t).getTime();return Math.round(i/6048e5)+1}(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):ie(r,t.length)},I:function(e,t,n){var i=function(e){Object(m.a)(1,arguments);var t=Object(g.a)(e),n=re(t).getTime()-oe(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):ie(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return ie(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var i=function(e){Object(m.a)(1,arguments);var t=Object(g.a)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),r=n-i;return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):ie(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return ie(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return ie(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return ie(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,r=e.getUTCHours();switch(i=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,r=e.getUTCHours();switch(i=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return function(e,t){return ie(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return ie(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):ie(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):ie(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return ie(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return ie(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,i=e.getUTCMilliseconds();return ie(Math.floor(i*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return de(r);case"XXXX":case"XX":return he(r);case"XXXXX":case"XXX":default:return he(r,":")}},x:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return de(r);case"xxxx":case"xx":return he(r);case"xxxxx":case"xxx":default:return he(r,":")}},O:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ue(r,":");case"OOOO":default:return"GMT"+he(r,":")}},z:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ue(r,":");case"zzzz":default:return"GMT"+he(r,":")}},t:function(e,t,n,i){return ie(Math.floor((i._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,i){return ie((i._originalDate||e).getTime(),t.length)}};function fe(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function ge(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var me={p:ge,P:function(e,t){var n,i=e.match(/(P+)(p+)?/),r=i[1],a=i[2];if(!a)return fe(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",fe(r,t)).replace("{{time}}",ge(a,t))}},pe=["D","DD"],ve=["YY","YYYY"];function we(e){return-1!==pe.indexOf(e)}function ye(e){return-1!==ve.indexOf(e)}function Me(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var xe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ce=/^'([^]*?)'?$/,ke=/''/g,Pe=/[a-zA-Z]/;function _e(e){return e.match(Ce)[1].replace(ke,"'")}var Te={code:"en-GB",formatDistance:O,formatLong:{date:C({formats:{full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:C({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:C({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},formatRelative:_,localize:A,match:S,options:{weekStartsOn:1,firstWeekContainsDate:4}},Ae=n("m/P+"),Ne=["slides"];function je(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-slide",16),B.Nb(1,"img",17),B.Vb("click",(function(){return B.jc(n),B.Zb().viewImage()})),B.Mb(),B.Mb()}if(2&e){var i=B.Zb();B.zb(1),B.dc("src",i.article.image,B.lc),B.cc("hidden",!i.showImage)}}function Se(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-col",30),B.Vb("click",(function(e){B.jc(n);var i=t.$implicit;return B.Zb(3).openFilterPopover(e,"topics",i)})),B.oc(1),B.Mb()}if(2&e){var i=t.$implicit,r=t.index,a=B.Zb(3);B.zb(1),B.rc(" ",i,"",r===a.article.displayTopics.length-1?"":","," ")}}function De(e,t){if(1&e&&(B.Nb(0,"div",27),B.Nb(1,"ion-row",22),B.Nb(2,"h4"),B.oc(3,"Topics"),B.Mb(),B.Mb(),B.Nb(4,"ion-row",28),B.Nb(5,"p"),B.nc(6,Se,2,2,"ion-col",29),B.Mb(),B.Mb(),B.Mb()),2&e){var n=B.Zb(2);B.zb(6),B.cc("ngForOf",n.article.displayTopics)}}function ze(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-col",30),B.Vb("click",(function(e){B.jc(n);var i=t.$implicit;return B.Zb(3).openFilterPopover(e,"keywords",i)})),B.oc(1),B.Mb()}if(2&e){var i=t.$implicit,r=t.index,a=B.Zb(3);B.zb(1),B.rc(" ",i,"",r===a.article.displayKeywords.length-1?"":","," ")}}function Le(e,t){if(1&e&&(B.Nb(0,"div",27),B.Nb(1,"ion-row",22),B.Nb(2,"h4"),B.oc(3,"Keywords"),B.Mb(),B.Mb(),B.Nb(4,"ion-row",28),B.Nb(5,"p"),B.nc(6,ze,2,2,"ion-col",29),B.Mb(),B.Mb(),B.Mb()),2&e){var n=B.Zb(2);B.zb(6),B.cc("ngForOf",n.article.displayKeywords)}}function Re(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-slide"),B.Nb(1,"div",18),B.nc(2,De,7,1,"div",19),B.Nb(3,"ion-row",20),B.Nb(4,"div",21),B.Nb(5,"ion-row",22),B.Nb(6,"h4"),B.oc(7,"Attitude"),B.Mb(),B.Mb(),B.Nb(8,"ion-row",22),B.Lb(9,"ion-range",23),B.Lb(10,"ion-range",24),B.Mb(),B.Mb(),B.Nb(11,"div",25),B.Nb(12,"ion-row",22),B.Nb(13,"h4"),B.oc(14,"News Source"),B.Mb(),B.Mb(),B.Nb(15,"ion-row",22),B.Nb(16,"p",26),B.Vb("click",(function(e){B.jc(n);var t=B.Zb();return t.openFilterPopover(e,"sources",t.article.displaySourceTitle)})),B.oc(17),B.Mb(),B.Mb(),B.Mb(),B.Nb(18,"div",25),B.Nb(19,"ion-row",22),B.Nb(20,"h4"),B.oc(21,"Word Count"),B.Mb(),B.Mb(),B.Nb(22,"ion-row",22),B.Nb(23,"p"),B.oc(24),B.Mb(),B.Mb(),B.Mb(),B.Nb(25,"div",25),B.Nb(26,"ion-row",22),B.Nb(27,"h4"),B.oc(28,"Article Origin"),B.Mb(),B.Mb(),B.Nb(29,"ion-row",22),B.Nb(30,"p",26),B.Vb("click",(function(e){B.jc(n);var t=B.Zb();return t.openFilterPopover(e,"locations",t.article.displaySourceCountry)})),B.oc(31),B.Mb(),B.Mb(),B.Mb(),B.Nb(32,"div",25),B.Nb(33,"ion-row",22),B.Nb(34,"h4"),B.oc(35,"Date Published"),B.Mb(),B.Mb(),B.Nb(36,"ion-row",22),B.Nb(37,"p"),B.oc(38),B.Mb(),B.Lb(39,"p"),B.Mb(),B.Mb(),B.Mb(),B.nc(40,Le,7,1,"div",19),B.Mb(),B.Mb()}if(2&e){var i=B.Zb();B.zb(2),B.cc("ngIf",i.article.displayTopics&&0!==i.article.displayTopics.length),B.zb(7),B.dc("value",i.article.tone>=0?"0":i.article.tone),B.zb(1),B.dc("value",i.article.tone>=0?i.article.tone:"0"),B.zb(7),B.pc(i.article.displaySourceTitle),B.zb(7),B.pc(i.article.wordCount),B.zb(7),B.pc(i.article.displaySourceCountry),B.zb(7),B.pc(i.datePublished),B.zb(2),B.cc("ngIf",i.article.displayKeywords&&0!==i.article.displayKeywords.length)}}var Ie,We=((Ie=function(){function e(t,n,i,r){_classCallCheck(this,e),this.modalController=t,this.popoverController=n,this.ga=i,this.inAppBrowser=r,this.showImage=!1,this.buttonClicked=!1,this.imageFailed=!1,this.slideOpts={initialSlide:0,speed:400,slidesPerView:1},this.leftArrowDisabled=!1,this.rightArrowDisabled=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.datePublished=function(e,t,n){Object(m.a)(2,arguments);var i=String(t),r=n||{},a=r.locale||D,o=a.options&&a.options.firstWeekContainsDate,s=null==o?1:Object(W.a)(o),c=null==r.firstWeekContainsDate?s:Object(W.a)(r.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=a.options&&a.options.weekStartsOn,u=null==l?0:Object(W.a)(l),d=null==r.weekStartsOn?u:Object(W.a)(r.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var h=Object(g.a)(e);if(!ee(h))throw new RangeError("Invalid time value");var b=R(h),f=ne(h,b),p={firstWeekContainsDate:c,weekStartsOn:d,locale:a,_originalDate:h},v=i.match(Oe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,me[t])(e,a.formatLong,p):e})).join("").match(xe).map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return _e(e);var n=be[t];if(n)return!r.useAdditionalWeekYearTokens&&ye(e)&&Me(e),!r.useAdditionalDayOfYearTokens&&we(e)&&Me(e),n(f,e,a.localize,p);if(t.match(Pe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("");return v}(new Date(this.article.datePublished),"Pp",{locale:Te})}},{key:"viewImage",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.buttonClicked){e.next=10;break}return this.buttonClicked=!0,e.next=4,this.modalController.create({component:J,componentProps:{image:this.article.image},cssClass:"auto-height"});case 4:return t=e.sent,this.ga.eventEmitter("select_content","engagement","Opened image"),this.buttonClicked=!1,e.next=9,t.present();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"openFilterPopover",value:function(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.buttonClicked){i.next=9;break}return this.buttonClicked=!0,i.next=4,this.popoverController.create({component:$,componentProps:{optionType:t,value:n},event:e,showBackdrop:!1,translucent:!0,cssClass:"filter-popover"});case 4:return r=i.sent,this.buttonClicked=!1,i.next=8,r.present();case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}}),i,this)})))}},{key:"goToArticle",value:function(){this.buttonClicked||(this.buttonClicked=!0,this.inAppBrowser.create(encodeURI(this.article.url),"_system"),this.ga.eventEmitter("select_content","engagement","Went to external website")),this.buttonClicked=!1}},{key:"slideNext",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttonClicked=!0,e.next=3,this.slides.slideNext();case 3:this.buttonClicked=!1;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"slidePrev",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttonClicked=!0,e.next=3,this.slides.slidePrev();case 3:this.buttonClicked=!1;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"checkSlidesPos",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slides.isBeginning();case 2:return this.leftArrowDisabled=e.sent,e.next=5,this.slides.isEnd();case 5:this.rightArrowDisabled=e.sent;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onSlideWillChange",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slides.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=1===e.t0,!e.t1){e.next=6;break}this.showImage=!0;case 6:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Ie)(B.Kb(o.ab),B.Kb(o.cb),B.Kb(u.a),B.Kb(Ae.a))},Ie.\u0275cmp=B.Eb({type:Ie,selectors:[["app-article"]],viewQuery:function(e,t){var n;1&e&&B.sc(Ne,!0),2&e&&B.hc(n=B.Wb())&&(t.slides=n.first)},inputs:{article:"article"},decls:26,vars:7,consts:[["size","1",1,"arrow-container"],[3,"disabled","click"],["slot","icon-only","name","arrow-back","color","primary"],["size","10"],[3,"options","ionSlideWillChange","ionSlidesDidLoad","ionSlideDidChange"],["slides",""],[1,"ion-no-padding","ion-no-margin"],[1,"body"],[1,"body-line-wrap",3,"innerHTML"],["class","img-container",4,"ngIf"],[4,"ngIf"],["slot","icon-only","name","arrow-forward","color","primary"],[1,"ion-no-margin","ion-no-padding"],[1,"ion-justify-content-evenly"],["color","primary",1,"ion-no-margin",3,"click"],["name","open"],[1,"img-container"],["alt","Loading image...","loading","eager",3,"hidden","src","click"],[1,"metrics-line-wrap"],["class","text-list-item",4,"ngIf"],[1,"ion-justify-content-evenly","ion-no-margin","ion-no-padding"],[1,"metric-item","ion-no-margin","ion-no-padding"],[1,"ion-justify-content-center"],["min","0","max","-1","step","0.1","color","danger",1,"negative-range",3,"value"],["min","0","max","1","step","0.1","color","primary",3,"value"],[1,"metric-item"],[1,"clickable",3,"click"],[1,"text-list-item"],[1,"ion-text-wrap","ion-justify-content-start"],["size","auto",3,"click",4,"ngFor","ngForOf"],["size","auto",3,"click"]],template:function(e,t){1&e&&(B.Nb(0,"ion-grid"),B.Nb(1,"ion-row"),B.Nb(2,"ion-col",0),B.Nb(3,"button",1),B.Vb("click",(function(){return t.slidePrev()})),B.Lb(4,"ion-icon",2),B.Mb(),B.Mb(),B.Nb(5,"ion-col",3),B.Nb(6,"ion-slides",4,5),B.Vb("ionSlideWillChange",(function(){return t.onSlideWillChange()}))("ionSlidesDidLoad",(function(){return t.checkSlidesPos()}))("ionSlideDidChange",(function(){return t.checkSlidesPos()})),B.Nb(8,"ion-slide"),B.Nb(9,"ion-grid",6),B.Nb(10,"ion-row"),B.Nb(11,"div",7),B.Nb(12,"h4"),B.oc(13),B.Mb(),B.Lb(14,"p",8),B.Mb(),B.Mb(),B.Mb(),B.Mb(),B.nc(15,je,2,2,"ion-slide",9),B.nc(16,Re,41,8,"ion-slide",10),B.Mb(),B.Mb(),B.Nb(17,"ion-col",0),B.Nb(18,"button",1),B.Vb("click",(function(){return t.slideNext()})),B.Lb(19,"ion-icon",11),B.Mb(),B.Mb(),B.Mb(),B.Mb(),B.Nb(20,"div",12),B.Nb(21,"ion-buttons",13),B.Nb(22,"ion-chip",14),B.Vb("click",(function(){return t.goToArticle()})),B.Nb(23,"ion-label"),B.oc(24,"Read On At Website"),B.Mb(),B.Lb(25,"ion-icon",15),B.Mb(),B.Mb(),B.Mb()),2&e&&(B.zb(3),B.cc("disabled",t.leftArrowDisabled||t.buttonClicked),B.zb(3),B.cc("options",t.slideOpts),B.zb(7),B.pc(t.article.displayAuthors&&t.article.displayAuthors.length>0?t.article.displayAuthors.join(", "):""),B.zb(1),B.cc("innerHTML",t.article.body,B.kc),B.zb(1),B.cc("ngIf",t.article.image),B.zb(1),B.cc("ngIf",t.article.displayTopics&&t.article.displayTopics.length>0||t.article.tone||t.article.displaySourceCountry||t.article.displayKeywords&&t.article.displayKeywords.length>0||t.article.wordCount),B.zb(2),B.cc("disabled",t.rightArrowDisabled||t.buttonClicked))},directives:[o.o,o.G,o.k,o.q,o.N,o.M,i.j,o.f,o.j,o.w,o.B,o.db,i.i],styles:["ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}ion-slides[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}ion-slides[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}ion-slides[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{margin-bottom:10px}.body[_ngcontent-%COMP%]{text-align:left;margin:0}.body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;color:#999;margin-bottom:8px}.body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-left:2px;margin-right:2px;white-space:pre-line}@media screen and (min-width:720px){.body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.body[_ngcontent-%COMP%]   p.body-line-wrap[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:14}@media screen and (min-width:720px){.body[_ngcontent-%COMP%]   p.body-line-wrap[_ngcontent-%COMP%]{-webkit-line-clamp:16}}.body[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding:0;margin:0}.img-container[_ngcontent-%COMP%]{height:300px;display:flex;justify-content:center;align-items:center}@media screen and (min-width:720px){.img-container[_ngcontent-%COMP%]{height:400px}}.img-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin:5px auto;transition:.3s}.img-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.metrics-line-wrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;line-height:16px;max-height:304px}@media screen and (min-width:720px){.metrics-line-wrap[_ngcontent-%COMP%]{line-height:20px;max-height:384px}}.metrics-line-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:14px}@media screen and (min-width:720px){.metrics-line-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.metrics-line-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{cursor:pointer}.metric-item[_ngcontent-%COMP%]{min-width:100px;max-width:200px;margin-bottom:0}.metric-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#999}.metric-item[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]:hover{cursor:pointer}.text-list-item[_ngcontent-%COMP%]{min-width:100px;max-width:auto;margin-bottom:10px}.text-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#999}ion-card-header[_ngcontent-%COMP%], ion-card-title[_ngcontent-%COMP%]{padding:0;margin:0}.arrow-container[_ngcontent-%COMP%]{z-index:10;display:flex;justify-content:center;align-items:center}.arrow-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:hsla(0,0%,100%,0)}.arrow-container[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:default;opacity:.4;pointer-events:none}.negative-range[_ngcontent-%COMP%]{transform:rotate(180deg)}ion-range[_ngcontent-%COMP%]{--knob-size:0;pointer-events:none}ion-col[_ngcontent-%COMP%], ion-range[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{padding:0;margin:0}"]}),Ie);function Ee(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-button",18),B.Vb("click",(function(){return B.jc(n),B.Zb(2).toggleMenu()})),B.Lb(1,"ion-icon",19),B.Mb()}}function Fe(e,t){1&e&&(B.Nb(0,"ion-label",20),B.oc(1,"Filter Menu"),B.Mb())}function Ue(e,t){if(1&e&&(B.Nb(0,"ion-buttons",15),B.nc(1,Ee,2,0,"ion-button",16),B.nc(2,Fe,2,0,"ion-label",17),B.Mb()),2&e){var n=B.Zb();B.zb(1),B.cc("ngIf",!n.menuStatus||n.platformWidth<720),B.zb(1),B.cc("ngIf",!n.menuStatus||n.platformWidth<720)}}function Ye(e,t){1&e&&(B.Nb(0,"ion-buttons",21),B.Nb(1,"ion-label",20),B.oc(2,"Main Menu"),B.Mb(),B.Lb(3,"ion-menu-button",22),B.Mb())}function He(e,t){if(1&e&&B.Lb(0,"app-article",37),2&e){var n=B.Zb().$implicit;B.cc("article",n)}}function Xe(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-card",23),B.Nb(1,"div",24),B.Vb("click",(function(){B.jc(n);var e=t.index;return B.Zb().onArticleSelected(e)})),B.Lb(2,"ion-ripple-effect",25),B.Nb(3,"ion-row"),B.Nb(4,"ion-col",26),B.Nb(5,"h1",27),B.Nb(6,"b"),B.oc(7),B.Mb(),B.Mb(),B.Mb(),B.Nb(8,"ion-col",28),B.Lb(9,"ion-icon",29),B.Mb(),B.Mb(),B.Mb(),B.Nb(10,"div",24),B.Vb("click",(function(){B.jc(n);var e=t.index;return B.Zb().onArticleSelected(e)})),B.Lb(11,"ion-ripple-effect",25),B.Nb(12,"ion-row"),B.Nb(13,"ion-col",26),B.Nb(14,"h1",30),B.Nb(15,"b"),B.oc(16),B.Mb(),B.Mb(),B.Mb(),B.Nb(17,"ion-col",28),B.Lb(18,"ion-icon",31),B.Mb(),B.Mb(),B.Mb(),B.Nb(19,"ion-card-content",32),B.nc(20,He,1,1,"app-article",33),B.Nb(21,"ion-row",34),B.Vb("click",(function(){B.jc(n);var e=t.index;return B.Zb().onArticleSelected(e)})),B.Nb(22,"ion-row",35),B.Nb(23,"ion-label"),B.oc(24),B.Mb(),B.Mb(),B.Nb(25,"ion-row",36),B.Nb(26,"ion-label"),B.oc(27),B.Mb(),B.Mb(),B.Mb(),B.Mb(),B.Mb()}if(2&e){var i=t.$implicit,r=t.index,a=B.Zb();B.dc("id",r),B.cc("hidden",0===a.displayArticles.length),B.Ab("id",r),B.zb(1),B.cc("hidden",r===a.openArticleIndex),B.zb(6),B.pc(i.title),B.zb(3),B.cc("hidden",r!==a.openArticleIndex),B.zb(6),B.pc(i.title),B.zb(4),B.cc("ngIf",r===a.openArticleIndex),B.zb(4),B.pc(i.displaySourceTitle),B.zb(3),B.pc(a.getArticleAge(i.displayDateTime?i.displayDateTime:i.datePublished))}}function qe(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-fab",38),B.Nb(1,"ion-fab-button",18),B.Vb("click",(function(){return B.jc(n),B.Zb().doRefresh()})),B.Lb(2,"ion-icon",39),B.Mb(),B.Mb()}if(2&e){var i=B.Zb();B.cc("disabled",i.updatingArticles||i.filtersLoading)("@btnInBottom",void 0)}}function Be(e,t){if(1&e){var n=B.Ob();B.Nb(0,"ion-fab",40),B.Nb(1,"ion-fab-button",41),B.Vb("click",(function(){return B.jc(n),B.Zb().saveFilters()})),B.Lb(2,"ion-icon",42),B.Mb(),B.Nb(3,"ion-fab-button",43),B.Vb("click",(function(){return B.jc(n),B.Zb().loadFilters()})),B.Lb(4,"ion-icon",44),B.Mb(),B.Mb()}if(2&e){var i=B.Zb();B.cc("@btnInLeft",void 0),B.zb(1),B.cc("disabled",i.updatingArticles||i.filtersLoading),B.zb(2),B.cc("disabled",i.updatingArticles||i.filtersLoading)}}var Ge,Ve,Ke=[{path:"",component:(Ge=function(){function e(t,n,i,r,a,o,c,l,u,d,h){var b=this;_classCallCheck(this,e),this.neutrfiyAPI=t,this.filterService=n,this.toastController=i,this.ga=r,this.changeDetector=a,this.menuService=o,this.menu=c,this.platform=l,this.authService=u,this.admob=d,this.screenOrientation=h,this.timeLeft=f.a.refreshTimeLimit,this.showRefreshFab=!1,this.filtersSaved=!0,this.readyArticles=new Array,this.displayArticles=new Array,this.displayThreshold=15,this.limit=25,this.updatingArticles=!0,this.filtersLoading=!1,this.menuStatus=!1,this.platform.ready().then((function(e){b.platformSource=e,b.platformWidth=b.platform.width(),b.platformHeight=b.platform.height(),b.screenOrientation.unlock(),b.admob.setAppVolume(0),f.a.production||b.admob.setDevMode(!0)})),this.platform.pause.subscribe((function(){b.pausedTimestamp=(new Date).getTime()})),this.platform.resume.subscribe((function(){(function(e,t){Object(m.a)(2,arguments);var n=p(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)})(new Date,b.pausedTimestamp)>=30?b.doRefresh():(b.resetTimer(),b.showRefreshFab=!0)})),this.pauseAdSubscription$=this.platform.pause.subscribe((function(){b.pauseAds()})),this.resumeAdSubscription$=this.platform.resume.subscribe((function(){b.playAds()})),this.filterSubcription$=this.filterService.getFilterOptions().subscribe((function(){return Object(s.__awaiter)(b,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filters=this.filterService.getQueryFilters(),e.next=3,this.handleInitDataLoad();case 3:case"end":return e.stop()}}),e,this)})))})),this.filtersSavedSubcription$=this.filterService.getFilterSavedStatus().subscribe((function(e){return Object(s.__awaiter)(b,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.authService.loaded&&(this.filtersSaved=e);case 1:case"end":return t.stop()}}),t,this)})))})),this.filtersLoadingSubcription$=this.filterService.getFilterLoading().subscribe((function(e){b.authService.loaded&&(b.filtersLoading=e,b.filtersLoading&&(b.openArticleIndex=void 0))})),this.platformResize$=this.platform.resize.subscribe((function(){b.platformWidth=b.platform.width()})),this.menuSubscription$=this.menuService.getMenuStatus().subscribe((function(e){return Object(s.__awaiter)(b,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.menuStatus=e;case 1:case"end":return t.stop()}}),t,this)})))}))}return _createClass(e,[{key:"ionViewWillEnter",value:function(){this.playAds(),this.menu.enable(!0,"filterMenu"),this.menu.enable(!0,"mainMenu"),this.displayThreshold=this.setDisplayThreshold()}},{key:"ionViewDidEnter",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filters=this.filterService.getQueryFilters(),e.next=3,this.handleInitDataLoad();case 3:this.startTimer(),this.menuService.openMenu(),this.menu.swipeGesture(!0,"filterMenu"),this.menu.swipeGesture(!0,"mainMenu");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewWillLeave",value:function(){this.pauseAds()}},{key:"ionViewDidLeave",value:function(){this.resetArticles(),this.filterSubcription$.unsubscribe(),this.filtersSavedSubcription$.unsubscribe(),this.pauseAdSubscription$.unsubscribe(),this.resumeAdSubscription$.unsubscribe(),this.updatingArticles=!0}},{key:"startTimer",value:function(){var e=this;this.timerObj=setTimeout((function(){e.timeLeft-=1,e.timeLeft>0?e.startTimer():e.showRefreshFab=!0}),1e3)}},{key:"resetTimer",value:function(){this.showRefreshFab=!1,this.stopTimer(),this.timeLeft=f.a.refreshTimeLimit,this.startTimer()}},{key:"stopTimer",value:function(){clearTimeout(this.timerObj),clearInterval(this.timerObj)}},{key:"playAds",value:function(){f.a.production?this.admob.banner.show({id:{ios:"ca-app-pub-1312649730148564/2740135529",android:"ca-app-pub-1312649730148564/2037976682"}}):"dom"!==this.platformSource&&this.admob.banner.show({id:{ios:"test",android:"test"}})}},{key:"pauseAds",value:function(){"dom"!==this.platformSource&&this.admob.banner.hide(f.a.production?{ios:"ca-app-pub-1312649730148564/2740135529",android:"ca-app-pub-1312649730148564/2037976682"}:{ios:"test",android:"test"})}},{key:"getArticleAge",value:function(e){var t=(new Date).valueOf()-new Date(e).valueOf();return Math.floor(60*Math.abs(t/36e5))<=15?"Just Now":function(e,t){return Object(m.a)(1,arguments),I(e,Date.now(),t)}(new Date(e))+" ago"}},{key:"resetArticles",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.nextToken=null,this.readyArticles=new Array,this.displayArticles=new Array;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"handleInitDataLoad",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updatingArticles=!0,e.next=3,this.resetArticles();case 3:t=1,n=100;case 4:if(1!==t){e.next=10;break}return e.next=7,this.listArticles(n);case 7:this.readyArticles=e.sent,e.next=30;break;case 10:if(2!==t){e.next=17;break}return n=400,e.next=14,this.listArticles(n,null);case 14:this.readyArticles=e.sent,e.next=30;break;case 17:if(t>2&&t<=10){e.next=21;break}return e.next=20,this.presentToast("Could only find a few articles that fit your criteria. Please remove some filters.","primary");case 20:return e.abrupt("break",32);case 21:return n=1e3,e.t0=(i=this.readyArticles).push,e.t1=i,e.t2=_toConsumableArray,e.next=27,this.listArticles(n,this.nextToken);case 27:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 30:t++;case 31:if(this.nextToken&&this.readyArticles.length<this.displayThreshold){e.next=4;break}case 32:if(this.displayArticles=this.readyArticles.slice(0,this.displayThreshold-1),this.readyArticles=this.readyArticles.slice(this.displayThreshold-1),this.limit=n,this.filterService.updateFilterLoading(!1),this.updatingArticles=!1,e.t5=!this.nextToken&&this.readyArticles.length<this.displayThreshold,!e.t5){e.next=41;break}return e.next=41,this.presentToast("Could only find a few articles that fit your criteria. Try to remove some filters.","primary");case 41:case"end":return e.stop()}}),e,this)})))}},{key:"onArticleSelected",value:function(e){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.openArticleIndex){t.next=4;break}if(this.openArticleIndex!=e){t.next=3;break}return t.abrupt("return",void(this.openArticleIndex=void 0));case 3:this.openArticleIndex=void 0;case 4:return this.openArticleIndex=e,this.changeDetector.detectChanges(),t.next=8,this.scrollTo(e.toString());case 8:case"end":return t.stop()}}),t,this)})))}},{key:"scrollTo",value:function(e){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById(e).offsetTop,this.platform.is("ios")||(n+=20),t.next=4,this.content.scrollToPoint(0,n,500);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setDisplayThreshold",value:function(){return this.platformHeight<=360?12:this.platformHeight<=480?15:this.platformHeight<=640?21:27}},{key:"setDateRange",value:function(){var e=function(e,t){if(Object(m.a)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n="years"in t?Object(W.a)(t.years):0,i="months"in t?Object(W.a)(t.months):0,r="weeks"in t?Object(W.a)(t.weeks):0,a="days"in t?Object(W.a)(t.days):0,o="hours"in t?Object(W.a)(t.hours):0,s="minutes"in t?Object(W.a)(t.minutes):0,c="seconds"in t?Object(W.a)(t.seconds):0,l=Y(Object(g.a)(e),i+12*n),u=F(l,a+7*r),d=s+60*o,h=c+60*d,b=1e3*h,f=new Date(u.getTime()-b);return f}(new Date,{days:3}),t=Object(H.a)(new Date,{hours:1});return{between:[e.toISOString(),t.toISOString()]}}},{key:"doRefresh",value:function(e){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.filterService.updateFilterLoading(!0),this.updatingArticles=!0,this.resetTimer(),t.prev=1,t.next=4,this.handleInitDataLoad();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("Could not get articles. Service returned this error: ",t.t0);case 9:e?(this.ga.eventEmitter("refresh_pull","engagement","Refreshed feed"),e.target.complete()):this.ga.eventEmitter("refresh_fab","engagement","Refreshed feed"),this.updatingArticles=!1;case 10:case"end":return t.stop()}}),t,this,[[1,6]])})))}},{key:"getNextPage",value:function(e){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.nextToken&&this.readyArticles.length<this.displayThreshold)){t.next=17;break}this.updatingArticles=!0,n=0;case 3:return r=new Array,t.t0=r.push,t.t1=r,t.t2=_toConsumableArray,t.next=9,this.listArticles(this.limit,this.nextToken);case 9:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4),(i=this.readyArticles).push.apply(i,r),n+=r.length;case 14:if(this.nextToken&&n<this.displayThreshold){t.next=3;break}case 15:t.next=18;break;case 17:this.nextToken||this.presentToast("There are no more articles to be read. You're up to date.","primary");case 18:return t.next=20,this.loadReadyArticles();case 20:this.updatingArticles=!1,e.target.complete();case 22:case"end":return t.stop()}}),t,this)})))}},{key:"listArticles",value:function(e,t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,a,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t=this.nextToken),void 0===e&&(e=25),n.prev=1,n.next=4,this.neutrfiyAPI.ArticlesByDate("news",this.setDateRange(),h.b.DESC,this.filters,e,t);case 4:i=n.sent,n.next=20;break;case 7:if(n.prev=7,n.t0=n.catch(1),console.log("Could not get articles. Service returned this error: ",n.t0),!n.t0.errors||1!==n.t0.errors.length||"Network Error"!==n.t0.errors[0].message){n.next=20;break}r=regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,setTimeout((function(){console.log("Retry attempt no: ",r+1)}),3e3*r+1);case 2:return n.prev=2,n.next=5,o.neutrfiyAPI.ArticlesByDate("news",o.setDateRange(),h.b.DESC,o.filters,e,t);case 5:return i=n.sent,console.log("Successfully retried to get articles."),n.abrupt("return","break");case 10:n.prev=10,n.t0=n.catch(2);case 12:2===r&&alert("Couldn't recover from network difficulties. Please check your connection.");case 13:case"end":return n.stop()}}),n,null,[[2,10]])})),a=0;case 12:if(!(a<3)){n.next=20;break}return n.delegateYield(r(a),"t1",14);case 14:if("break"!==n.t1){n.next=17;break}return n.abrupt("break",20);case 17:a++,n.next=12;break;case 20:return n.abrupt("return",(this.nextToken=i.nextToken,i.items));case 21:case"end":return n.stop()}}),n,this,[[1,7]])})))}},{key:"saveFilters",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filterService.updateFilterLoading(!0),e.next=3,this.filterService.saveFilters();case 3:if(!e.sent){e.next=9;break}return e.next=6,this.presentToast("Your filters have been saved.","success");case 6:this.ga.eventEmitter("save_filters_fab","engagement","Saved filters"),e.next=10;break;case 9:this.presentToast("Could not save your filters. Please try again.","danger");case 10:this.filterService.updateFilterLoading(!1);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"loadFilters",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filterService.updateFilterLoading(!0),e.next=3,this.filterService.loadFilters(this.authService.user.username);case 3:if(!e.sent){e.next=9;break}return e.next=6,this.presentToast("Your changes to the filters have been reset.","success");case 6:this.ga.eventEmitter("load_filters","engagement","Re-loaded filters"),e.next=10;break;case 9:this.presentToast("Could not reset your filters. Please try again.","danger");case 10:case"end":return e.stop()}}),e,this)})))}},{key:"loadReadyArticles",value:function(){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.readyArticles.length>=this.displayThreshold?(i=this.displayThreshold,(t=this.displayArticles).push.apply(t,_toConsumableArray(this.readyArticles.slice(0,this.displayThreshold-1))),this.readyArticles=this.readyArticles.slice(this.displayThreshold-1)):this.readyArticles.length&&(i=this.readyArticles.length,(n=this.displayArticles).push.apply(n,_toConsumableArray(this.readyArticles)),this.readyArticles=[]),this.displayArticles.length>=3*this.displayThreshold&&!this.platform.is("ios")&&(this.displayArticles=this.displayArticles.slice(i-1),this.openArticleIndex&&this.openArticleIndex-(i-1)<0?this.openArticleIndex=void 0:this.openArticleIndex-=i-1);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"presentToast",value:function(e,t){return Object(s.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:e,duration:2e3,color:t,cssClass:"ion-text-center"});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"toggleMenu",value:function(){this.platformWidth<720?(this.menuService.closeMenu(),this.menu.toggle("filterMenu")):this.menuService.toggleMenu()}}]),e}(),Ge.\u0275fac=function(e){return new(e||Ge)(B.Kb(h.a),B.Kb(d.a),B.Kb(o.fb),B.Kb(u.a),B.Kb(B.h),B.Kb(l.a),B.Kb(o.Z),B.Kb(o.bb),B.Kb(c.a),B.Kb(X.a),B.Kb(q.a))},Ge.\u0275cmp=B.Eb({type:Ge,selectors:[["app-news-feed"]],viewQuery:function(e,t){var n;1&e&&B.sc(o.l,!0),2&e&&B.hc(n=B.Wb())&&(t.content=n.first)},decls:28,vars:13,consts:[["slot","start","class","left-buttons",4,"ngIf"],["src","../../assets/img/logo/neutrify-logo-v2.png",1,"logo"],["slot","end","class","right-buttons",4,"ngIf"],["slot","fixed",3,"disabled","ionRefresh"],["pullingIcon","refresh","refreshingSpinner","crescent"],[1,"ion-text-center",3,"hidden"],[1,"ion-justify-content-center",3,"hidden"],["animated","",2,"width","240px","line-height","16px","margin-top","5px"],["id","feed"],[3,"hidden","id",4,"ngFor","ngForOf"],[3,"hidden"],["threshold","5%",3,"disabled","hidden","ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more articles..."],["vertical","bottom","horizontal","center","slot","fixed",3,"disabled",4,"ngIf"],["vertical","center","horizontal","start","slot","fixed",4,"ngIf"],["slot","start",1,"left-buttons"],[3,"click",4,"ngIf"],["class","hide-label","color","primary",4,"ngIf"],[3,"click"],["name","options","slot","icon-only"],["color","primary",1,"hide-label"],["slot","end",1,"right-buttons"],["menu","mainMenu","slot","end"],[3,"hidden","id"],[1,"ion-activatable","tappable","ion-no-margin","ion-no-padding",3,"hidden","click"],["type","unbound"],["size","11",1,"ion-no-margin","ion-no-padding","title"],[1,"two-line-wrap"],["size","1",1,"ion-text-end"],["name","chevron-down-outline"],[1,"four-line-wrap"],["name","chevron-up-outline"],[1,"ion-no-margin","ion-no-padding"],[3,"article",4,"ngIf"],[1,"ion-justify-content-between","footer",3,"click"],[1,"ion-justify-content-start"],[1,"ion-justify-content-end"],[3,"article"],["vertical","bottom","horizontal","center","slot","fixed",3,"disabled"],["size","large","name","refresh"],["vertical","center","horizontal","start","slot","fixed"],["color","primary",3,"disabled","click"],["size","large","name","save"],["color","danger",2,"margin-top","10px",3,"disabled","click"],["size","large","name","close-circle"]],template:function(e,t){1&e&&(B.Nb(0,"ion-header"),B.Nb(1,"ion-toolbar"),B.nc(2,Ue,3,2,"ion-buttons",0),B.Nb(3,"ion-title"),B.Lb(4,"ion-img",1),B.Mb(),B.nc(5,Ye,4,0,"ion-buttons",2),B.Mb(),B.Mb(),B.Nb(6,"ion-content"),B.Nb(7,"ion-refresher",3),B.Vb("ionRefresh",(function(e){return t.doRefresh(e)})),B.Lb(8,"ion-refresher-content",4),B.Mb(),B.Nb(9,"div",5),B.Nb(10,"p"),B.Nb(11,"b"),B.oc(12,"Pull down the feed to get the latest articles"),B.Mb(),B.Mb(),B.Mb(),B.Nb(13,"ion-row",6),B.Lb(14,"ion-skeleton-text",7),B.Mb(),B.Nb(15,"ion-list",8),B.nc(16,Xe,28,10,"ion-card",9),B.Lb(17,"app-skeleton-feed",10),B.Nb(18,"div",5),B.Nb(19,"h2"),B.oc(20,"Could not find any articles. It is likely your filters are too strict."),B.Mb(),B.Mb(),B.Mb(),B.Nb(21,"ion-infinite-scroll",11),B.Vb("ionInfinite",(function(e){return t.getNextPage(e)})),B.Lb(22,"ion-infinite-scroll-content",12),B.Mb(),B.Nb(23,"div",5),B.Nb(24,"h2"),B.oc(25,"You're all caught up!"),B.Mb(),B.Mb(),B.Mb(),B.nc(26,qe,3,2,"ion-fab",13),B.nc(27,Be,5,3,"ion-fab",14)),2&e&&(B.zb(2),B.cc("ngIf",t.authService.loaded),B.zb(3),B.cc("ngIf",t.authService.loaded),B.zb(2),B.cc("disabled",t.updatingArticles),B.zb(2),B.cc("hidden",t.updatingArticles),B.zb(4),B.cc("hidden",!t.updatingArticles&&0!==t.displayArticles.length),B.zb(3),B.cc("ngForOf",t.displayArticles),B.zb(1),B.cc("hidden",!t.updatingArticles),B.zb(1),B.cc("hidden",0!==t.displayArticles.length||t.updatingArticles),B.zb(3),B.cc("disabled",t.updatingArticles)("hidden",null===t.nextToken),B.zb(2),B.cc("hidden",null!==t.nextToken||t.updatingArticles||0===t.displayArticles.length),B.zb(3),B.cc("ngIf",t.showRefreshFab),B.zb(1),B.cc("ngIf",!t.filtersSaved))},directives:[o.p,o.W,i.j,o.U,o.r,o.l,o.C,o.D,o.G,o.L,o.x,i.i,Z,o.s,o.t,o.f,o.e,o.q,o.w,o.z,o.g,o.E,o.k,o.h,We,o.m,o.n],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-medium)}ion-header[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-light)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img.logo[_ngcontent-%COMP%]{max-width:150px;max-height:48px;margin:0 auto}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{position:absolute}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons.left-buttons[_ngcontent-%COMP%]{left:0}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons.right-buttons[_ngcontent-%COMP%]{right:0}@media screen and (max-width:600px){ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   .hide-label[_ngcontent-%COMP%]{display:none}}#feed[_ngcontent-%COMP%]{margin:0 auto;max-width:1080px;background-color:inherit}#feed[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding-top:0}p[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:14px;margin-top:5px;margin-bottom:0}p[_ngcontent-%COMP%]:hover{cursor:pointer}h2[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-card[_ngcontent-%COMP%]{padding:5px 5px 0;margin:5px 2px;min-width:270px;max-width:1080px;max-height:568px;background-color:var(--ion-color-light)}ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:hover, ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin-top:2px;margin-bottom:2px}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1.two-line-wrap[_ngcontent-%COMP%]{-webkit-line-clamp:2}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1.four-line-wrap[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1.two-line-wrap[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1.four-line-wrap[_ngcontent-%COMP%]{-webkit-line-clamp:4}ion-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:#999}ion-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]:hover{cursor:pointer}"],data:{animation:[Object(b.i)("btnInBottom",[Object(b.h)("void => *",[Object(b.g)({transform:"translateY(100%)",opacity:.7}),Object(b.e)(500)])]),Object(b.i)("btnInLeft",[Object(b.h)("void => *",[Object(b.g)({transform:"translateX(-100%)",opacity:.7}),Object(b.e)(500)])])]}}),Ge)}],Qe=((Ve=function e(){_classCallCheck(this,e)}).\u0275mod=B.Ib({type:Ve}),Ve.\u0275inj=B.Hb({factory:function(e){return new(e||Ve)},imports:[[i.b,r.h,o.X,a.j.forChild(Ke)]]}),Ve)}}]);